# RSS推送服务配置示例
# 复制此文件并根据实际情况修改配置值

# RSS订阅源配置
rss:
  # 使用本地聚合服务提供的 Atom 源
  url: "http://192.168.100.3:10082/atom"
  # 注意: 不再按日期过滤,而是推送所有未推送的内容,数据库会自动去重

# 推送配置
push:
  # 启用哪些推送方式
  enabled_pushers:
    - pushplus

  # 推送时间窗口（例如：只在9:00-18:00之间推送）
  time_window:
    start: "00:00"
    end: "23:00"
    enabled: false

# PushPlus配置
pushplus:
  token: "f3da240f668a4fa7ac8db1f9eaa16d39"  # PushPlus Token
  topic: "66"  # 群组编号

  # 消息模板配置
  message_template:
    max_items: 20  # 一次推送最多几条新闻(建议10-20条,0表示不限制但可能超长)
    # 下方两个开关在当前实现中不再生效,推送内容只包含标题+链接+时间
    include_description: false  # 是否包含描述
    include_image: false       # 是否尝试添加图片(图片会增加内容长度)
    template: "markdown"  # 消息模板: html, txt, json, markdown

# 日志配置
logging:
  level: "INFO"  # INFO级别即可
  file: "logs/app.log"
  max_size: "10MB"
  backup_count: 5

# 数据库配置（用于记录已推送的内容）
database:
  type: "sqlite"
  path: "data/pushed_items.db"

# 内容增强配置（支持两阶段筛选）
content_enhancer:
  enabled: true  # 是否启用内容增强
  provider: "openai"  # openai 或 claude

  # 两阶段筛选说明:
  # - 阶段1: 使用快速模型对标题+摘要打分(1-10分)
  # - 阶段2: 对高分文章获取全文,用强大模型深度分析
  #
  # 配置优先从.env文件读取:
  # - ENABLE_TWO_STAGE=true/false (是否启用两阶段)
  # - ENABLE_FULL_TEXT=true/false (是否获取全文)
  # - STAGE1_API_KEY, STAGE1_API_BASE, STAGE1_MODEL
  # - STAGE2_API_KEY, STAGE2_API_BASE, STAGE2_MODEL
  # - STAGE1_SCORE_THRESHOLD (初筛分数阈值,默认7分)

# 调度配置
scheduler:
  enabled: true
  timezone: "Asia/Shanghai"
  # 每天定时执行
  schedule_type: "daily"  # daily: 每天执行, interval: 按间隔执行
  daily_time: "07:30"     # 每天执行的时间(HH:MM格式)
  # 支持多个推送时间,可通过环境变量DAILY_PUSH_TIME覆盖:
  # 单个时间: DAILY_PUSH_TIME=08:15
  # 多个时间: DAILY_PUSH_TIME=08:15,18:30 (用逗号分隔)

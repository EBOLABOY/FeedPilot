# Dockeré…ç½®éªŒè¯æ¸…å•

## âœ… å·²åˆ›å»ºçš„æ–‡ä»¶

- [x] `Dockerfile` - Dockeré•œåƒæ„å»ºæ–‡ä»¶
- [x] `docker-compose.yml` - Docker Composeé…ç½®
- [x] `.dockerignore` - Dockeræ„å»ºå¿½ç•¥æ–‡ä»¶
- [x] `.env.docker.example` - ç¯å¢ƒå˜é‡é…ç½®æ¨¡æ¿
- [x] `DOCKER.md` - è¯¦ç»†çš„Dockeréƒ¨ç½²æ–‡æ¡£
- [x] `deploy.sh` - å¿«é€Ÿéƒ¨ç½²è„šæœ¬
- [x] `README.md` - å·²æ›´æ–°ï¼Œæ·»åŠ Dockeréƒ¨ç½²è¯´æ˜

## ğŸ“‹ éƒ¨ç½²å‰æ£€æŸ¥æ¸…å•

### 1. ç¯å¢ƒå‡†å¤‡
- [ ] å·²å®‰è£… Docker (version 20.10+)
- [ ] å·²å®‰è£… Docker Compose (version 1.29+)
- [ ] æœåŠ¡å™¨å·²è”ç½‘

### 2. é…ç½®æ–‡ä»¶å‡†å¤‡
- [ ] å·²å¤åˆ¶ `.env.docker.example` ä¸º `.env`
- [ ] å·²åœ¨ `.env` ä¸­é…ç½® `AI_API_KEY`
- [ ] å·²æ£€æŸ¥ `config/app.yaml` ä¸­çš„é…ç½®ï¼ˆRSS URLã€PushPlus Tokenç­‰ï¼‰

### 3. ç›®å½•æƒé™
- [ ] `data/` ç›®å½•å¯å†™
- [ ] `logs/` ç›®å½•å¯å†™
- [ ] `config/` ç›®å½•å¯è¯»

## ğŸ§ª æµ‹è¯•æ­¥éª¤

### 1. æ„å»ºé•œåƒæµ‹è¯•
```bash
docker-compose build
```
é¢„æœŸç»“æœ: æ— é”™è¯¯ï¼ŒæˆåŠŸæ„å»ºé•œåƒ

### 2. é…ç½®éªŒè¯æµ‹è¯•
```bash
docker-compose config
```
é¢„æœŸç»“æœ: æ˜¾ç¤ºå®Œæ•´çš„é…ç½®ï¼Œæ— è¯­æ³•é”™è¯¯

### 3. å¯åŠ¨æœåŠ¡æµ‹è¯•
```bash
docker-compose up -d
docker-compose ps
```
é¢„æœŸç»“æœ: æœåŠ¡çŠ¶æ€ä¸º `Up`

### 4. æ—¥å¿—æ£€æŸ¥æµ‹è¯•
```bash
docker-compose logs --tail=50
```
é¢„æœŸç»“æœ:
- çœ‹åˆ° "å·²åŠ è½½é˜¶æ®µ1æç¤ºè¯"
- çœ‹åˆ° "å·²åŠ è½½é˜¶æ®µ2æç¤ºè¯"
- çœ‹åˆ° "ä¸¤é˜¶æ®µç­›é€‰å·²å¯ç”¨"
- æ— ERRORçº§åˆ«é”™è¯¯

### 5. åŠŸèƒ½æµ‹è¯•
```bash
# æ‰§è¡Œä¸€æ¬¡æ¨é€æµ‹è¯•
docker-compose exec feedpilot python main.py --test
```
é¢„æœŸç»“æœ: PushPlusè¿æ¥æµ‹è¯•æˆåŠŸ

### 6. å®Œæ•´æµç¨‹æµ‹è¯•
```bash
# æ¸…ç©ºæ•°æ®åº“ï¼Œæ‰§è¡Œä¸€æ¬¡å®Œæ•´æ¨é€
docker-compose exec feedpilot rm -f data/pushed_items.db
docker-compose exec feedpilot python main.py --once
```
é¢„æœŸç»“æœ:
- RSSæŠ“å–æˆåŠŸ
- é˜¶æ®µ1ç­›é€‰å®Œæˆ
- é˜¶æ®µ2åˆ†æå®Œæˆ
- æ¨é€æˆåŠŸ

## ğŸ” å¸¸è§é—®é¢˜æ’æŸ¥

### é—®é¢˜1: æ„å»ºå¤±è´¥
```bash
# æ¸…ç†ç¼“å­˜é‡æ–°æ„å»º
docker-compose build --no-cache
```

### é—®é¢˜2: æƒé™é—®é¢˜
```bash
# ä¿®å¤ç›®å½•æƒé™
mkdir -p data logs
chmod 755 data logs
```

### é—®é¢˜3: ç¯å¢ƒå˜é‡æœªç”Ÿæ•ˆ
```bash
# æ£€æŸ¥ç¯å¢ƒå˜é‡
docker-compose exec feedpilot env | grep AI_
```

### é—®é¢˜4: æ•°æ®åº“é”å®š
```bash
# åœæ­¢å®¹å™¨ï¼Œåˆ é™¤æ•°æ®åº“
docker-compose down
rm -f data/pushed_items.db
docker-compose up -d
```

## ğŸ“Š æ€§èƒ½ç›‘æ§

### æŸ¥çœ‹èµ„æºä½¿ç”¨
```bash
docker stats feedpilot
```

### æŸ¥çœ‹å®¹å™¨å¥åº·çŠ¶æ€
```bash
docker inspect feedpilot --format='{{.State.Health.Status}}'
```

### æŸ¥çœ‹ç£ç›˜ä½¿ç”¨
```bash
du -sh data/ logs/
```

## ğŸš€ ç”Ÿäº§ç¯å¢ƒå°±ç»ªæ£€æŸ¥

- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡
- [ ] æ—¥å¿—æ­£å¸¸è¾“å‡º
- [ ] æ¨é€åŠŸèƒ½æ­£å¸¸
- [ ] èµ„æºä½¿ç”¨åˆç†ï¼ˆCPU < 50%, å†…å­˜ < 256MBï¼‰
- [ ] è®¾ç½®äº†è‡ªåŠ¨é‡å¯ç­–ç•¥
- [ ] é…ç½®äº†æ—¥å¿—è½®è½¬
- [ ] å¤‡ä»½äº†é…ç½®æ–‡ä»¶
- [ ] æ–‡æ¡£å·²é˜…è¯»

## ğŸ“ éƒ¨ç½²è®°å½•

éƒ¨ç½²æ—¥æœŸ: _______________
éƒ¨ç½²äººå‘˜: _______________
æœåŠ¡å™¨IP: _______________
Dockerç‰ˆæœ¬: _______________
æµ‹è¯•ç»“æœ: _______________

## ğŸ‰ ä¸‹ä¸€æ­¥

éƒ¨ç½²æˆåŠŸå:
1. è®¾ç½®æœåŠ¡å™¨å®šæ—¶å¤‡ä»½
2. é…ç½®ç›‘æ§å‘Šè­¦ï¼ˆå¯é€‰ï¼‰
3. å®šæœŸæŸ¥çœ‹æ—¥å¿—
4. å®šæœŸæ¸…ç†æ—§æ•°æ®

---

**æç¤º**: å¦‚é‡åˆ°é—®é¢˜ï¼Œè¯·æŸ¥é˜… `DOCKER.md` è·å–è¯¦ç»†è¯´æ˜ã€‚
